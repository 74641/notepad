<!DOCTYPE html>
<html lang="en_us">
  <head>
    <!-- Quill: JS library -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

    <!-- Quill: CSS stylesheet -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

    <!-- Materialize (https://materializecss.github.io/materialize/getting-started.html) -->
      <!-- Compiled and minified CSS -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@materializecss/materialize@1.1.0/dist/css/materialize.min.css">

      <!-- Compiled and minified JavaScript -->
      <script src="https://cdn.jsdelivr.net/npm/@materializecss/materialize@1.1.0/dist/js/materialize.min.js"></script>
      
    <!--When using type="module", it disallows same-origin script files
      https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS/Errors/CORSRequestNotHttp
      (Basically any javascript that needs to use Quill's resources NEEDS to run in script tags in this html doc)
      Eric says any local javascript file listed here can ALSO access other JS files listed here (need to test)
    -->
    <script src="Notepad.js"></script>
    <meta charset="utf-8">
    <title>Notepad</title>
    <style>
      /* https://stackoverflow.com/questions/4705848/rendering-html-inside-textarea */
      div#noteDiv {
        width: 100%;
        height: 200px;
        border-radius: 5px;
        border: 1px solid black !important;
        padding: 5px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class ="section">
        <div class="row">
          <div class="col s3">
            <header class="col s12 left-align">Notepad</header>
          </div>
          <hr class="col s12">
        </div>
      </div>
    </div>

    <div class="container">
      <div class="section">
        <div class="row">
          <div class="col s3">
            <a class="waves-effect waves-light btn" onclick="addNote()">Add Note</a>
          </div>
          <div class = "col s9" id = "editor-area">
            <!--Quill Editor goes here (inserted by addNote())-->
          </div>
        </div>
      </div>
    </div>
      <footer></footer>
    <script>
      /* When the add button is clicked, create a new note 
      TODO: save the previous one (only if the title has text or any content at all)
      */
     // When clicking on a specific note, use note id to get the stored contents
      function addNote() {
        
        insertEditorContainer = "<div id=editor-container><strong>Text text2</strong></div>";
        
        document.getElementById('editor-area').innerHTML = insertEditorContainer;
        //alert("addNote function called...");
        
        var quill = new Quill('#editor-container', {
            modules: {
              toolbar: [
                [{ header: [1, 2, false] }],
                ['bold', 'italic', 'underline'],
                ['image', 'code-block']
              ]
            },
            placeholder: 'Compose an epic...',
            theme: 'snow'  // or 'bubble'
        });
        // Works, but gets a bunch of other useless quill editor divs around it
        //alert(document.getElementById('editor-container').innerHTML);

        // https://stackoverflow.com/questions/54835375/how-to-edit-and-save-my-html-file-using-quill
        // returns a json object with contents of the editor
        // will want to do a check for if an editor (with text) exists, then try to save contents
        var content = quill.getContents();
        alert(content.content());
      }
    </script>
  </body>
</html>
